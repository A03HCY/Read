<!doctype html>
<html lang="zh-CN" class="mdui-theme-auto">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
    <meta name="renderer" content="webkit" />

    <script src="https://cdn.jsdelivr.net/npm/mdui/mdui.global.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/mdui/mdui.min.css" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/extension.css">
    <script src="/static/js/extension.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/howler/dist/howler.min.js"></script>

    <title>Read Book</title>
</head>

<body>

    <mdui-layout full-height>

        <mdui-navigation-drawer id="home_drawer" close-on-overlay-click class="navigation-drawer">
            <div style="align-self: flex-start;width: 100%;margin-top: 4px;">
                <mdui-list-subheader>Books</mdui-list-subheader>
            </div>
            <mdui-list style="padding-top: 4px;">
                <mdui-list-item icon="book_outlined">Book Bank</mdui-list-item>
                <mdui-list-item icon="settings_outlined">Settings</mdui-list-item>
            </mdui-list>
        </mdui-navigation-drawer>

        <mdui-navigation-drawer id="book_drawer" close-on-overlay-click placement="right" class="navigation-drawer">
            <div style="align-self: flex-start;width: 100%;margin-top: 4px;">
                <mdui-list-subheader id="book_name">目录</mdui-list-subheader>
            </div>
            <div id="index">
                <mdui-list style="padding-top: 4px;">
                    <mdui-list-item onclick="select_code()" icon="file_upload">选择书本</mdui-list-item>
                </mdui-list>
            </div>
        </mdui-navigation-drawer>

        <mdui-top-app-bar class="app-bar">
            <mdui-button-icon id="menu" icon="menu"></mdui-button-icon>
            <mdui-top-app-bar-title id="title">Read Book</mdui-top-app-bar-title>
            <div style="flex-grow: 1"></div>
            <mdui-button-icon id="book" icon="format_list_bulleted"></mdui-button-icon>
        </mdui-top-app-bar>

        <mdui-layout-main class="layout-main" style="overflow: auto;">
            <div id="article" style="margin: 16px;">
            </div>
        </mdui-layout-main>

    </mdui-layout>

    <mdui-snackbar id="menu_loaded_info" placement="bottom-end">目录加载完毕</mdui-snackbar>

</body>

<script>
    let home_drawer_state = book_drawer_state = false
    let home_drawer = document.getElementById('home_drawer')
    let book_drawer = document.getElementById('book_drawer')

    const close_drawer = (target) => {
        if (target == 'home' && home_drawer_state == true) {
            $('#menu').trigger('click')
        }
        if (target == 'book' && book_drawer_state == true) {
            $('#book').trigger('click')
        }
        if (target == 'all') {
            close_drawer('home')
            close_drawer('book')
        }
    }
    const open_drawer = (target) => {
        if (target == 'home' && home_drawer_state == false) {
            $('#menu').trigger('click')
        }
        if (target == 'book' && book_drawer_state == false) {
            $('#book').trigger('click')
        }
        if (target == 'all') {
            open_drawer('home')
            open_drawer('book')
        }
    }

    $('#menu').on('click', () => {
        home_drawer.open = !home_drawer.open
        home_drawer_state = home_drawer.open
    })
    $('#book').on('click', () => {
        book_drawer.open = !book_drawer.open
        book_drawer_state = book_drawer.open
    })

</script>
<script src="/static/js/app.js"></script>


</html>